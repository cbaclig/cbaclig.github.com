---
layout: post
title: !binary |-
  Z2VtX3BsdWdpbiBHZW0gd2l0aCBNdWx0aXBsZSBHZW0gUGF0aHM=
wordpress_id: 8
wordpress_url: !binary |-
  aHR0cDovL3d3dy5jaHJpc2JhY2xpZy5jb20vP3A9OA==
date: 2010-02-24 23:52:00.000000000 -08:00
---
So recently I <a href="http://so2000andlate.blogspot.com/2010/02/upgrading-ruby-186-in-instantrails.html">upgraded to Ruby 1.8.6</a>.&nbsp; I didn't have any problems, and it looked like I had pulled it off without screwing anything up.&nbsp; Then, for some lame reason, I tried to start up Mongrel, using mongrel_rails start, and got this:<br /><br /><code>C:/InstantRails/ruby_1-8-6/lib/ruby/gems/1.8/gems/activesupport-2.3.5/lib/active_support/dependencies.rb:156:in `require': no such file to load -- C:/<br />Users/Chris/.bundle/ruby/1.8/gems/mongrel-1.1.5-x86-mswin32-60/lib/mongrel/init.rb (MissingSourceFile)</code><br /><br /><br />Why, this started, I don't know.&nbsp; Maybe I was screwing around with my RubyGems config file one too many times...&nbsp; Whatever the case, I was stuck.&nbsp; After checking out my installed gems, I noticed that the mongrel-1.1.5-x86-mswin32-60 gem was installed on my system, but not in that directory.&nbsp; It was actually in the gem directory of my <i>older</i> ruby installation, not in my <a href="http://github.com/carlhuda/bundler">bundler gem</a> directory.<br /><br />First, I tried removing the bundler gem path from my .gemrc, however this didn't fix anything because bundler actually adds the bundler path to your load paths automatically when starting up Rails.&nbsp; Balls...<br /><br />Following the stack trace, I arrived at gem_plugin.rb in the gem_plugin gem (yes the gem_plugin gem.)&nbsp; After some Googling, it turns out that the gem spawned off from the Mongrel project, but doesn't seem to be active any longer: the 0.2.3 gem was put on <a href="http://rubygems.org/gems/gem_plugin">Gemcutter</a> about 3 years ago and a <a href="http://github.com/genki/gem_plugin">Github repo</a> was pushed the initial commit, and that's it.<br /><br />The load method in gem_plugin was actually appending the the GEM_HOME directory to all of the gem names, and then trying to load the gem's init.rb file.&nbsp; However, I had multiple gem paths, which threw off the whole operation.&nbsp; After more googling, I actually found a solution in the depths of <a href="http://74.125.155.132/search?q=cache:5I0rVab4pu8J:mongrel.cloudbur.st/ticket/22+gem_plugin+ticket&amp;cd=2&amp;hl=en&amp;ct=clnk&amp;gl=us&amp;client=firefox-a">Google's cache</a>.&nbsp; The ticket says the patch was accepted, but it doesn't look like it was pushed into my version of gem_bundler.&nbsp; Without any other obvious resources, I just decided to patch my own copy of gem_plugin.&nbsp; You can see a copy of my new load function <a href="https://gist.github.com/314340/3261782ea11de20744156ae246380b9c1eda1991">here</a>.&nbsp; It's basically the same as the solution proposed in the ticket.
